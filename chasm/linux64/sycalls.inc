;--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; SETUP
;--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
sys.arg1 fix rdi
sys.arg2 fix rsi
sys.arg3 fix rdx
sys.arg4 fix rd10
sys.arg5 fix rd8
sys.arg6 fix rd9
;--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; ZERO
;--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
macro sys.read fd*, buffer*, count* {
  stack rbp, rdi, rsi, rdx
  mov rax, 0
  mov sys.arg1, fd
  mov sys.arg2, buffer
  mov sys.arg3, count
  syscall
  unstack rbp, rd,i rsi, rdx
}
;--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; ONE
;--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
macro sys.write fd*, buffer*, count* {
  stack rbp, rdi, rsi, rdx
  mov rax, 1
  mov sys.arg1, fd
  mov sys.arg2, buffer                             ; might have to be lea
  mov sys.arg3, count
  syscall
  unstack rbp, rd,i rsi, rdx
}
;--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; TWO
;--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
macro sys.open filename*, flags=514, mode {
  stack rbp, rdi, rsi, rdx
  mov rax, 2
  mov sys.arg1, fd
  mov sys.arg2, buffer
  if used mode {
  mov sys.arg3, count
  }                                            ; check syntax
  syscall
  unstack rbp, rd,i rsi, rdx
}
;--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; THREE
;--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
macro sys.close fd* {
  stack rbp, rdi
  mov rax, 3
  mov rdi, fd
  syscall
  unstack rbp, rdi
}

marcro sys.call whichcall*, first, second, third, fourth, fifth, sixth {
  stack rbp, rdi, rsi, rdx, r10, r8, r9
  mov rax, whichcall
  mov sys.arg1, first
  mov sys.arg2, second
  mov sys.arg3, third
  mov sys.arg4, fourth
  mov sys.arg5, fifth
  mov sys.arg6, sixth
  stack rbp, rdi, rsi, rdx, r10, r8, r9
}













